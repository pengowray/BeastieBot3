# Taxon Rules Configuration
# This file extends the legacy rules-list.txt with additional features.
#
# Features:
# - Exclusion patterns (exclude taxa from lists based on regex)
# - Main article links ({{main|...}} templates in headings)
# - List-specific overrides (exclude/rename taxa per list)
# - Force-split rules (skip heading for a taxon, group by children instead)
# - Virtual groups (organize taxa by custom groupings instead of ranks)
#
# The legacy rules-list.txt is still used for common names and wikilinks.
# This file adds newer features that can't be expressed in the legacy format.
#
# Force-split example:
#   When grouping by "order", if Squamata has force_split: true, instead of:
#     === Squamata ===
#     * Species A
#     * Species B
#   The items will be pushed to the next grouping level (e.g., family):
#     === Colubridae ===
#     * Species A
#     === Viperidae ===
#     * Species B
#
# Virtual groups example:
#   For Squamata, instead of just splitting by family, we can define
#   logical groups like "Snakes" and "Lizards" based on superfamily/clade membership.

# Global exclusion patterns (regex)
# Taxa matching any pattern are excluded from all lists
global_exclusions:
  # Example: exclude fossil-only taxa (if you had a pattern for them)
  # - "^Fossil "

# Virtual groups define custom taxonomic groupings
# These override the normal rank-based grouping for specific parent taxa
virtual_groups:
  # Squamata: organize into Snakes, Lizards, and Worm lizards
  Squamata:
    # Groups are checked in order; first match wins
    groups:
      - name: Snakes
        common_name: snake
        common_plural: snakes
        main_article: Snake
        # Match by superfamily (from COL enrichment)
        superfamilies:
          - Colubroidea
          - Booidea
          - Pythonoidea
          - Typhlopoidea
          - Uropeltoidea
          - Acrochordoidea
        # Or by family if superfamily not available
        families:
          - Viperidae
          - Colubridae
          - Elapidae
          - Boidae
          - Pythonidae
          - Typhlopidae
          - Leptotyphlopidae
          - Anomalepididae
          - Uropeltidae
          - Homalopsidae
          - Lamprophiidae
          - Pareidae
          - Xenodermidae
          - Bolyeridae
          - Tropidophiidae
          - Aniliidae
          - Cylindrophiidae
          - Anomochilidae
          - Xenophidiidae
          - Acrochordidae
          - Pseudoxyrhophiidae
          - Atractaspididae
          - Prosymnidae
          - Psammophiidae
          - Dipsadidae
          - Calamariidae

      - name: Worm lizards
        common_name: worm lizard
        common_plural: worm lizards
        main_article: Amphisbaenia
        families:
          - Amphisbaenidae
          - Blanidae
          - Bipedidae
          - Cadeidae
          - Rhineuridae
          - Trogonophidae

      - name: Lizards
        common_name: lizard
        common_plural: lizards
        main_article: Lizard
        # Default group for anything else in Squamata
        default: true
        # Can also explicitly list families/superfamilies for lizards
        superfamilies:
          - Lacertoidea
          - Shinisauroidea
        clades:
          - Iguania

  # Artiodactyla/Cetartiodactyla: separate cetaceans from even-toed ungulates
  # IUCN uses both "ARTIODACTYLA" and "CETARTIODACTYLA" depending on the taxon
  Artiodactyla:
    groups:
      - name: Cetaceans
        common_name: cetacean
        common_plural: cetaceans
        main_article: Cetacea
        families:
          # Baleen whales (Mysticeti)
          - Balaenidae        # right whales
          - Balaenopteridae   # rorquals
          - Eschrichtiidae    # gray whale
          - Neobalaenidae     # pygmy right whale
          # Toothed whales (Odontoceti)
          - Delphinidae       # oceanic dolphins
          - Iniidae           # river dolphins
          - Kogiidae          # dwarf/pygmy sperm whales
          - Lipotidae         # baiji (extinct)
          - Monodontidae      # narwhal, beluga
          - Phocoenidae       # porpoises
          - Physeteridae      # sperm whale
          - Platanistidae     # South Asian river dolphins
          - Pontoporiidae     # La Plata dolphin
          - Ziphiidae         # beaked whales

      - name: Even-toed ungulates
        common_name: even-toed ungulate
        common_plural: even-toed ungulates
        main_article: Even-toed ungulate
        default: true
        families:
          - Antilocapridae    # pronghorn
          - Bovidae           # cattle, antelope, sheep, goats
          - Camelidae         # camels, llamas
          - Cervidae          # deer
          - Giraffidae        # giraffes, okapi
          - Hippopotamidae    # hippos
          - Moschidae         # musk deer
          - Suidae            # pigs
          - Tayassuidae       # peccaries
          - Tragulidae        # chevrotains

  # Copy for CETARTIODACTYLA (IUCN uses this name for some taxa)
  Cetartiodactyla:
    groups:
      - name: Cetaceans
        common_name: cetacean
        common_plural: cetaceans
        main_article: Cetacea
        families:
          - Balaenidae
          - Balaenopteridae
          - Eschrichtiidae
          - Neobalaenidae
          - Delphinidae
          - Iniidae
          - Kogiidae
          - Lipotidae
          - Monodontidae
          - Phocoenidae
          - Physeteridae
          - Platanistidae
          - Pontoporiidae
          - Ziphiidae

      - name: Even-toed ungulates
        common_name: even-toed ungulate
        common_plural: even-toed ungulates
        main_article: Even-toed ungulate
        default: true
        families:
          - Antilocapridae
          - Bovidae
          - Camelidae
          - Cervidae
          - Giraffidae
          - Hippopotamidae
          - Moschidae
          - Suidae
          - Tayassuidae
          - Tragulidae

# Taxa-specific rules
taxa:
  # Example: Chordata should always split into classes
  Chordata:
    force_split: true
    main_article: Chordate
    comprises: "vertebrates and some invertebrates"

  # Squamata uses virtual groups defined above
  Squamata:
    use_virtual_groups: true
    main_article: Squamata
    comprises: "lizards, snakes, and amphisbaenians"

  # Artiodactyla uses virtual groups to separate cetaceans
  Artiodactyla:
    use_virtual_groups: true
    common_name: artiodactyl
    common_plural: Artiodactyls
    main_article: Even-toed ungulate
    comprises: "even-toed ungulates and cetaceans"

  # Cetartiodactyla is the combined order name used by IUCN
  Cetartiodactyla:
    use_virtual_groups: true
    common_name: cetartiodactyl
    common_plural: Cetartiodactyls
    main_article: Even-toed ungulate
    comprises: "even-toed ungulates and cetaceans"

  # Example: Testudines with main article
  Testudines:
    main_article: Turtle
    common_name: turtle
    common_plural: turtles and tortoises

  # Example: Anura with wikilink disambiguation
  Anura:
    wikilink: "Anura (frog)"
    common_name: frog
    common_plural: frogs

  # Example: Hygrophila with kingdom-aware disambiguation
  Hygrophila:
    wikilink: "Hygrophila (gastropod)"

  # Example: List-specific exclusion
  # Homo sapiens:
  #   list_overrides:
  #     mammals-cr:
  #       exclude: true
